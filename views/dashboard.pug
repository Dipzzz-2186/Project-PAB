extends layout

block page_config
  - var activePage = 'dashboard'
  - var searchPlaceholder = 'Search...'

block content
  .space-y-6#pageContent
    // Dashboard Section
    section.page(data-page='dashboard')
      .page-header
        h1.page-title Dashboard
        p.page-subtitle Welcome to your Transport Management System
      
      // Stats Cards Row 1
      .grid.grid-cols-4
        .card
          .card-header.flex-row
            h3.card-title Total Reports
            svg(width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' style='color: var(--muted-foreground);')
              path(d='M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2')
              circle(cx='9' cy='7' r='4')
              path(d='M23 21v-2a4 4 0 0 0-3-3.87')
              path(d='M16 3.13a4 4 0 0 1 0 7.75')
          .card-content
            .stats-value 1,234
            p.stats-change +12% from last month
        
        .card
          .card-header.flex-row
            h3.card-title Clients
            svg(width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' style='color: var(--muted-foreground);')
              path(d='M3 21h18')
              path(d='M9 8h1')
              path(d='M9 12h1')
              path(d='M9 16h1')
              path(d='M14 8h1')
              path(d='M14 12h1')
              path(d='M14 16h1')
              path(d='M6 4h12v17H6z')
          .card-content
            .stats-value 456
            p.stats-change +8% from last month
        
        .card
          .card-header.flex-row
            h3.card-title Kontrak Aktif
            svg(width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' style='color: var(--muted-foreground);')
              polyline(points='22 7 13.5 15.5 8.5 10.5 2 17')
              polyline(points='16 7 22 7 22 13')
          .card-content
            .stats-value= activeContracts
            p.stats-change dari total #{totalContracts} kontrak
        
        .card
          .card-header.flex-row
            h3.card-title Daily Activity
            svg(width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' style='color: var(--muted-foreground);')
              line(x1='12' y1='1' x2='12' y2='23')
              path(d='M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6')
          .card-content
            .stats-value 10
      
      // Stats Cards Row 2
      .grid.grid-cols-4
        .card
          .card-header.flex-row
            h3.card-title Mobil Disewa (Bulan ini)
            svg(width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' style='color: var(--muted-foreground);')
              path(d='M3 13h18l-1.5-4.5a2 2 0 0 0-1.9-1.5H6.4a2 2 0 0 0-1.9 1.5L3 13z')
              path(d='M5 13v4a2 2 0 0 0 2 2h1')
              path(d='M19 13v4a2 2 0 0 1-2 2h-1')
              circle(cx='8' cy='19' r='2')
              circle(cx='16' cy='19' r='2')
          .card-content
            .stats-value 20
        
        .card
          .card-header.flex-row
            h3.card-title Mobil Ganti Sparepart (Bulan ini)
            svg(width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' style='color: var(--muted-foreground);')
              path(d='M14.5 6.5l3 3')
              path(d='M11 8l-6 6a2 2 0 0 0 0 2.8l.2.2a2 2 0 0 0 2.8 0l6-6')
              path(d='M16 3l5 5-3 3-5-5 3-3z')
          .card-content
            .stats-value 31
        
        .card
          .card-header.flex-row
            h3.card-title Client Menyewa (Bulan ini)
            svg(width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' style='color: var(--muted-foreground);')
              circle(cx='9' cy='7' r='3')
              circle(cx='17' cy='9' r='3')
              path(d='M2 21v-2a4 4 0 0 1 4-4h6a4 4 0 0 1 4 4v2')
              path(d='M14 15a4 4 0 0 1 4-3h2a4 4 0 0 1 4 4v2')
          .card-content
            .stats-value 20
        
        .card
          .card-header.flex-row
            h3.card-title Kontrak Perpanjangan
            svg(width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' style='color: var(--muted-foreground);')
              path(d='M21 12a9 9 0 1 1-2.6-6.4')
              polyline(points='21 3 21 9 15 9')
          .card-content
            .stats-value 10

      .card
        .card-header.flex-row
          h3.card-title Total Nilai Kontrak
          svg(width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' style='color: var(--muted-foreground);')
            rect(x='1' y='4' width='22' height='16' rx='2' ry='2')
            line(x1='1' y1='10' x2='23' y2='10')
        .card-content
          .stats-value= 'Rp ' + totalContractValue.toLocaleString('id-ID')
          p.stats-change akumulasi semua kontrak
      
      // Chart
      .card
        .card-header
          h3.card-title Tren Penjualan
        .card-content
          .chart-container
            canvas#revenueChart
      
      // Activity and Billing
      .grid.grid-cols-2
        .card
          .card-header
            h3.card-title Kontrak Terbaru
          .card-content
            .table-wrapper
              table.report-table
                thead
                  tr
                    th No
                    th Client
                    th Status
                    th Harga
                tbody
                  if recentContracts && recentContracts.length > 0
                    each contract, index in recentContracts
                      tr
                        td= index + 1
                        td= contract.client_name
                        td
                          span.status-badge(class=contract.status === 'active' ? 'status-success' : contract.status === 'pending' ? 'status-warning' : 'status-danger')= contract.status
                        td= 'Rp ' + (contract.price || 0).toLocaleString('id-ID')
                  else
                    tr
                      td(colspan='4' style='text-align: center; padding: 1rem; color: #9ca3af;') Belum ada kontrak
        
        .card
          .card-header
            h3.card-title Upcoming Billing
          .card-content
            .task-list
              .task-item
                input.task-checkbox(type='checkbox')
                .task-content
                  p.task-title Call with prospect
                  p.task-time Today at 2:00 PM
              
              .task-item
                input.task-checkbox(type='checkbox')
                .task-content
                  p.task-title Send proposal
                  p.task-time Tomorrow at 10:00 AM
              
              .task-item
                input.task-checkbox(type='checkbox')
                .task-content
                  p.task-title Review contracts
                  p.task-time Friday at 3:00 PM
    
    // Reports Section
    section.page.hidden(data-page='reports')
      .page-header
        h1.page-title List Report Mobil
        p.page-subtitle Ringkasan laporan kendaraan berdasarkan kontrak aktif
      
      .card
        .card-header
          h3.card-title Daftar Report Mobil
        .card-content
          .report-filters.mb-6#reportFilters
            button.filter-btn.active(data-report-type='rental') Report Penyewaan
            button.filter-btn(data-report-type='service') Report Service
          
          .report-section(data-report='rental')
            .table-wrapper
              table.report-table
                thead
                  tr
                    th No Kwitansi
                    th Penyewa
                    th Merek
                    th Type
                    th Nomor Polisi
                    th Unit
                    th Tahun
                    th Harga Sewa
                    th PPN
                    th Harga Sewa + PPN
                tbody
                  tr
                    td 1
                    td Kantor Cabang Cibubur
                    td Toyota
                    td Innova Zenix 2.0 Q HV CVT
                    td B 2909 PZU
                    td 1
                    td 2023
                    td Rp 15.000.000
                    td Rp 1.650.000
                    td Rp 16.650.000
                  tr
                    td 2
                    td Kantor Cabang Bekasi
                    td Honda
                    td BR-V Prestige CVT
                    td B 1456 HJR
                    td 1
                    td 2022
                    td Rp 7.500.000
                    td Rp 825.000
                    td Rp 8.325.000
                  tr
                    td 3
                    td PT Surya Abadi
                    td Mitsubishi
                    td Xpander Ultimate CVT
                    td B 9876 QWE
                    td 2
                    td 2021
                    td Rp 8.000.000
                    td Rp 880.000
                    td Rp 8.880.000
          
          .report-section.hidden(data-report='service')
            .table-wrapper
              table.report-table
                thead
                  tr
                    th No Kwitansi
                    th Penyewa
                    th Merek
                    th Type
                    th Nomor Polisi
                    th Tahun
                    th Jenis Service
                    th Status
                tbody
                  tr
                    td SVC-001
                    td Kantor Cabang Cibubur
                    td Toyota
                    td Innova Zenix 2.0
                    td B 2909 PZU
                    td 2023
                    td Service Berkala + Oli
                    td
                      span.status-badge.status-success Selesai
                  tr
                    td SVC-002
                    td Kantor Cabang Bekasi
                    td Honda
                    td BR-V Prestige CVT
                    td B 1456 HJR
                    td 2022
                    td Ganti Kampas Rem
                    td
                      span.status-badge.status-warning Proses

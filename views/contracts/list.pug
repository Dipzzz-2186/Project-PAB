extends ../layout

block page_config
  - var activePage = 'deals'
  - var searchPlaceholder = 'Search contracts...'

block content
  .page-header
    h1.page-title Contract Management
    p.page-subtitle Kelola semua kontrak penyewaan kendaraan Anda
  
  .grid.grid-cols-2(style='margin-bottom: 2rem;')
    .card
      .card-header.flex-row
        h3.card-title Total Kontrak
        svg(width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' style='color: var(--muted-foreground);')
          polyline(points='22 7 13.5 15.5 8.5 10.5 2 17')
          polyline(points='16 7 22 7 22 13')
      .card-content
        .stats-value= data.length
        p.stats-change Semua kontrak aktif
    
    .card
      .card-header.flex-row
        h3.card-title Total Nilai Kontrak
        svg(width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' style='color: var(--muted-foreground);')
          rect(x='1' y='4' width='22' height='16' rx='2' ry='2')
          line(x1='1' y1='10' x2='23' y2='10')
      .card-content
        .stats-value= 'Rp ' + data.reduce((a,b) => a + b.price, 0).toLocaleString('id-ID')
        p.stats-change Total nilai semua kontrak
  
  .card
    .card-header
      h3.card-title Daftar Kontrak Aktif
    .card-content
      .table-wrapper
        table.report-table
          thead
            tr
              th No
              th Client
              th Status
              th Harga
              th Action
          tbody
            if data && data.length > 0
              each contract, index in data
                tr
                  td= index + 1
                  td= contract.client_name
                  td
                    span.status-badge(class=contract.status === 'active' ? 'status-success' : contract.status === 'pending' ? 'status-warning' : 'status-danger')= contract.status
                  td= 'Rp ' + contract.price.toLocaleString('id-ID')
                  td
                    a(href='#' style='color: #42b883; font-weight: 500;') Edit
            else
              tr
                td(colspan='5' style='text-align: center; padding: 2rem; color: #9ca3af;') Tidak ada kontrak
  
  .card(style='margin-top: 2rem;')
    .card-header
      h3.card-title Buat Kontrak Baru
    .card-content
      form(method='post' action='/contracts/create' style='max-width: 500px;')
        .form-group
          label(for='client_name') Nama Client
          input#client_name(name='client_name' type='text' placeholder='Masukkan nama client' required)
        
        .form-group
          label(for='price') Harga (Rp)
          input#price(name='price' type='number' placeholder='Masukkan harga' required)
        
        button(type='submit') Buat Kontrak

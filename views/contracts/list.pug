extends ../layout

block content
  .app-container
    .overlay#overlay
    
    // Sidebar
    aside.sidebar#sidebar
      .sidebar-header
        h3.sidebar-title#sidebarTitle Transport System
        button.toggle-btn.desktop-menu-btn#toggleSidebarDesktop(aria-label='Toggle sidebar')
          svg(width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2')
            path(d='M15 18l-6-6 6-6')
      
      nav.sidebar-nav#sidebarNav
        a.nav-item(href='/dashboard' data-page='dashboard')
          svg(width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2')
            rect(x='3' y='3' width='7' height='7')
            rect(x='14' y='3' width='7' height='7')
            rect(x='14' y='14' width='7' height='7')
            rect(x='3' y='14' width='7' height='7')
          span.nav-text Dashboard
        
        a.nav-item.active(href='#' data-page='deals')
          svg(width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2')
            polyline(points='22 7 13.5 15.5 8.5 10.5 2 17')
            polyline(points='16 7 22 7 22 13')
          span.nav-text Contract Deals
        
        a.nav-item(href='#' data-page='reports')
          svg(width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2')
            line(x1='12' y1='20' x2='12' y2='10')
            line(x1='18' y1='20' x2='18' y2='4')
            line(x1='6' y1='20' x2='6' y2='16')
          span.nav-text Reports
        
        a.nav-item(href='#' data-page='settings')
          svg(width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2')
            circle(cx='12' cy='12' r='3')
            path(d='M12 1v6m0 6v6m5.2-13L13 9.8M10 13l-4.2 4.2M23 12h-6m-6 0H1m18-5.2L13 10.2M10 13l-4.2 4.2')
          span.nav-text Settings
    
    // Main Content
    .main-content#mainContent
      // Navbar
      nav.navbar
        .navbar-content
          .navbar-left
            button.toggle-btn.mobile-menu-btn#toggleSidebarMobile(aria-label='Toggle menu' style='display: none;')
              svg(width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2')
                line(x1='3' y1='12' x2='21' y2='12')
                line(x1='3' y1='6' x2='21' y2='6')
                line(x1='3' y1='18' x2='21' y2='18')
            
            form.search-form#searchForm
              svg.search-icon(width='18' height='18' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2')
                circle(cx='11' cy='11' r='8')
                path(d='m21 21-4.35-4.35')
              input.search-input#searchInput(type='search' placeholder='Search contracts...')
          
          .navbar-right
            button.toggle-btn.desktop-menu-btn#toggleSidebarNav(aria-label='Toggle sidebar')
              svg(width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2')
                line(x1='3' y1='12' x2='21' y2='12')
                line(x1='3' y1='6' x2='21' y2='6')
                line(x1='3' y1='18' x2='21' y2='18')
            
            .dropdown
              button.account-btn#accountBtn(aria-label='Account menu')
                .avatar
                  svg(width='18' height='18' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2')
                    path(d='M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2')
                    circle(cx='12' cy='7' r='4')
                span.account-text(style='font-size: 0.875rem; font-weight: 500;') #{user.name}
                svg.account-text(width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2')
                  path(d='m6 9 6 6 6-6')
              
              .dropdown-menu#accountDropdown
                .dropdown-header
                  p(style='font-size: 0.875rem; font-weight: 500;') #{user.name}
                  p(style='font-size: 0.75rem; color: var(--muted-foreground);') #{user.email}
                button.dropdown-item
                  svg(width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2')
                    rect(x='3' y='11' width='18' height='11' rx='2' ry='2')
                    path(d='M7 11V7a5 5 0 0 1 10 0v4')
                  span Change Password
                a.dropdown-item.logout(href='/logout' style='color: #dc2626; display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; background: none; border: none; width: 100%; text-align: left; cursor: pointer; font-size: 0.875rem; transition: background-color 0.2s; text-decoration: none;')
                  svg(width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2')
                    path(d='M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4')
                    polyline(points='16 17 21 12 16 7')
                    line(x1='21' y1='12' x2='9' y2='12')
                  span Logout
      
      // Page Content
      main.content
        .page-header
          h1.page-title Contract Management
          p.page-subtitle Kelola semua kontrak penyewaan kendaraan Anda
        
        .grid.grid-cols-2(style='margin-bottom: 2rem;')
          .card
            .card-header.flex-row
              h3.card-title Total Kontrak
              svg(width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' style='color: var(--muted-foreground);')
                polyline(points='22 7 13.5 15.5 8.5 10.5 2 17')
                polyline(points='16 7 22 7 22 13')
            .card-content
              .stats-value= data.length
              p.stats-change Semua kontrak aktif
          
          .card
            .card-header.flex-row
              h3.card-title Total Nilai Kontrak
              svg(width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' style='color: var(--muted-foreground);')
                rect(x='1' y='4' width='22' height='16' rx='2' ry='2')
                line(x1='1' y1='10' x2='23' y2='10')
            .card-content
              .stats-value= 'Rp ' + data.reduce((a,b) => a + b.price, 0).toLocaleString('id-ID')
              p.stats-change Total nilai semua kontrak
        
        .card
          .card-header
            h3.card-title Daftar Kontrak Aktif
          .card-content
            .table-wrapper
              table.report-table
                thead
                  tr
                    th No
                    th Client
                    th Status
                    th Harga
                    th Action
                tbody
                  if data && data.length > 0
                    each contract, index in data
                      tr
                        td= index + 1
                        td= contract.client_name
                        td
                          span.status-badge(class=contract.status === 'active' ? 'status-success' : contract.status === 'pending' ? 'status-warning' : 'status-danger')= contract.status
                        td= 'Rp ' + contract.price.toLocaleString('id-ID')
                        td
                          a(href='#' style='color: #42b883; font-weight: 500;') Edit
                  else
                    tr
                      td(colspan='5' style='text-align: center; padding: 2rem; color: #9ca3af;') Tidak ada kontrak
        
        .card(style='margin-top: 2rem;')
          .card-header
            h3.card-title Buat Kontrak Baru
          .card-content
            form(method='post' action='/contracts/create' style='max-width: 500px;')
              .form-group
                label(for='client_name') Nama Client
                input#client_name(name='client_name' type='text' placeholder='Masukkan nama client' required)
              
              .form-group
                label(for='price') Harga (Rp)
                input#price(name='price' type='number' placeholder='Masukkan harga' required)
              
              button(type='submit') Buat Kontrak
      
      // Footer
      footer.footer
        p &copy; 2024 Transport Management System. All rights reserved.
